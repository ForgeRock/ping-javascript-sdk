<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@pingidentity/protect | Documentation</title><meta name="description" content="Documentation for Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script><link rel="stylesheet" href="../assets/typedoc-github-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/ForgeRock/ping-javascript-sdk">GitHub</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Documentation</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">Documentation</a></li><li><a href="_pingidentity_protect.html">@pingidentity/protect</a></li></ul><h1>Module @pingidentity/protect</h1></div><section class="tsd-panel tsd-typography"><a id="ping-protect" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Ping Protect<a href="#ping-protect" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>The Ping Protect module is intended to be used along with the ForgeRock JavaScript SDK to provide the Ping Protect feature.</p>
<p><strong>IMPORTANT NOTE</strong>: This module is not yet published. For the current published Ping Protect package please visit <a href="https://github.com/ForgeRock/forgerock-javascript-sdk/tree/develop/packages/ping-protect">https://github.com/ForgeRock/forgerock-javascript-sdk/tree/develop/packages/ping-protect</a></p>
<a id="overall-design" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overall Design<a href="#overall-design" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>There are two components on the server side and two components on the client side to enable this feature. You'll need to have the following:</p>
<ol>
<li>PingOne Advanced Identity Cloud (aka PingOne AIC) platform or an up-to-date Ping Identity Access Management (aka PingAM)</li>
<li>PingOne tenant with Protect enabled</li>
<li>A Ping Protect Service configured in AIC or AM</li>
<li>A journey/tree with the appropriate Protect Nodes</li>
<li>A client application with the <code>@forgerock/javascript-sdk</code> and <code>@pingidentity/protect</code> modules installed</li>
</ol>
<a id="quick-start-for-client-application" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Quick Start for Client Application<a href="#quick-start-for-client-application" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Install both modules and their latest versions:</p>
<pre><code class="sh"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@forgerock/javascript-sdk</span><span class="hl-1"> </span><span class="hl-2">@pingidentity/protect</span>
</code><button type="button">Copy</button></pre>

<p>The <code>@pingidentity/protect</code> module has a <code>createProtect()</code> function that accepts configuration options and returns a set of methods for interacting with Protect. The two main responsibilities of the Ping Protect module are the initialization of the profiling and data collection and the completion and preparation of the collected data for the server. You can find these two methods on the API returned by <code>createProtect()</code>.</p>
<ul>
<li><code>start()</code></li>
<li><code>getData()</code></li>
</ul>
<p>When calling <code>createProtect()</code>, you have many different options to configure what and how the data is collected. The most important and required of these settings is the <code>envId</code>. All other settings are optional.</p>
<p>The <code>start</code> method can be called at application startup, or when you receive the <code>PingOneProtectInitializeCallback</code> callback from the server. We recommend you call <code>start</code> as soon as you can to collect as much data as possible for higher accuracy.</p>
<pre><code class="js"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">createProtect</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@pingidentity/protect&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Call early in your application startup</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">protect</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">createProtect</span><span class="hl-1">({ </span><span class="hl-4">envId:</span><span class="hl-1"> </span><span class="hl-2">&#39;12345&#39;</span><span class="hl-1"> });</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">protect</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>Alternatively, you can delay the initialization until you receive the instruction from the server by way of the special callback: <code>PingOneProtectInitializeCallback</code>. To do this, you would call the <code>start</code> method when the callback is present in the journey.</p>
<pre><code class="js"><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">step</span><span class="hl-1">.</span><span class="hl-0">getCallbacksOfType</span><span class="hl-1">(</span><span class="hl-2">&#39;PingOneProtectInitializeCallback&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Asynchronous call</span><br/><span class="hl-1">    </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">protect</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">// handle error</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>You then call the <code>FRAuth.next</code> method after initialization to move the user forward in the journey.</p>
<pre><code class="js"><span class="hl-4">FRAuth</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">(</span><span class="hl-4">step</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>At some point in the journey, and as late as possible in order to collect as much data as you can, you will come across the <code>PingOneProtectEvaluationCallback</code>. This is when you call the <code>getData</code> method to package what's been collected for the server to evaluate.</p>
<pre><code class="js"><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1">;</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">step</span><span class="hl-1">.</span><span class="hl-0">getCallbacksOfType</span><span class="hl-1">(</span><span class="hl-2">&#39;PingOneProtectEvaluationCallback&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Asynchronous call</span><br/><span class="hl-1">    </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">protect</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">();</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">// handle error</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Now that we have the data, set it on the callback in order to send it to the server when we call <code>next</code>.</p>
<pre><code class="js"><span class="hl-4">callback</span><span class="hl-1">.</span><span class="hl-0">setData</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">);</span><br/><br/><span class="hl-4">FRAuth</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">(</span><span class="hl-4">step</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="error-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Error Handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>When you encounter an error during initialization or evaluation, set the error message on the callback using the <code>setClientError</code> method. Setting the message on the callback is how it gets sent to the server on the <code>FRAuth.next</code> method call.</p>
<pre><code class="js"><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">step</span><span class="hl-1">.</span><span class="hl-0">getCallbacksOfType</span><span class="hl-1">(</span><span class="hl-2">&#39;PingOneProtectInitializeCallback&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">callback</span><span class="hl-1"> = </span><span class="hl-4">step</span><span class="hl-1">.</span><span class="hl-0">getCallbackOfType</span><span class="hl-1">(</span><span class="hl-2">&#39;PingOneProtectInitializeCallback&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Asynchronous call</span><br/><span class="hl-1">    </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">protect</span><span class="hl-1">.</span><span class="hl-0">start</span><span class="hl-1">();</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">callback</span><span class="hl-1">.</span><span class="hl-0">setClientError</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>A similar process is used for the evaluation step.</p>
<pre><code class="js"><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1">;</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">step</span><span class="hl-1">.</span><span class="hl-0">getCallbacksOfType</span><span class="hl-1">(</span><span class="hl-2">&#39;PingOneProtectEvaluationCallback&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">callback</span><span class="hl-1"> = </span><span class="hl-4">step</span><span class="hl-1">.</span><span class="hl-0">getCallbackOfType</span><span class="hl-1">(</span><span class="hl-2">&#39;PingOneProtectEvaluationCallback&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Asynchronous call</span><br/><span class="hl-1">    </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">protect</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">();</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">err</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">callback</span><span class="hl-1">.</span><span class="hl-0">setClientError</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="full-api" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Full API<a href="#full-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="js"><span class="hl-5">// Protect methods</span><br/><span class="hl-0">start</span><span class="hl-1">();</span><br/><span class="hl-0">getData</span><span class="hl-1">();</span><br/><span class="hl-0">pauseBehavioralData</span><span class="hl-1">();</span><br/><span class="hl-0">resumeBehavioralData</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">// PingOneProtectInitializeCallback methods</span><br/><span class="hl-4">callback</span><span class="hl-1">.</span><span class="hl-0">getConfig</span><span class="hl-1">();</span><br/><span class="hl-4">callback</span><span class="hl-1">.</span><span class="hl-0">setClientError</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-5">// PingOneProtectEvaluationCallback methods</span><br/><span class="hl-4">callback</span><span class="hl-1">.</span><span class="hl-0">setData</span><span class="hl-1">();</span><br/><span class="hl-4">callback</span><span class="hl-1">.</span><span class="hl-0">setClientError</span><span class="hl-1">();</span><br/><span class="hl-4">callback</span><span class="hl-1">.</span><span class="hl-0">getPauseBehavioralData</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

</section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Modules"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Modules</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary"><a id="index" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Module"><use href="../assets/icons.svg#icon-2"></use></svg><a href="_pingidentity_protect.index.html">index</a><a href="#index" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="types" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Module"><use href="../assets/icons.svg#icon-2"></use></svg><a href="_pingidentity_protect.types.html">types</a><a href="#types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#ping-protect"><span>Ping <wbr/>Protect</span></a><ul><li><a href="#overall-design"><span>Overall <wbr/>Design</span></a></li><li><a href="#quick-start-for-client-application"><span>Quick <wbr/>Start for <wbr/>Client <wbr/>Application</span></a></li><li><a href="#error-handling"><span>Error <wbr/>Handling</span></a></li><li><a href="#full-api"><span>Full API</span></a></li></ul><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Modules"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Modules</summary><div><a href="#index" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Module"><use href="../assets/icons.svg#icon-2"></use></svg><span>index</span></a><a href="#types" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Module"><use href="../assets/icons.svg#icon-2"></use></svg><span>types</span></a></div></details></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/ForgeRock/ping-javascript-sdk" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="../index.html">Documentation</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
